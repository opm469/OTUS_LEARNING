# Расчет подсетй IPv4  
## Задание  

* Определение подсетей по IPv4-адресу
* Расчет подсейтей по IPv4-адресу

Пример 1

| Дано:  |      |  
| ----- | ----- |  
| IP-адрес узла | 192.168.200.139 | 
| Исходная маска подсети | 255.255.255.0 | 
| Новая маска подсети | 255.255.255.224 |  

| Найти: |   |
------ | -----
Количество бит подсети |  3 
Количество созданных подсетей |  8
Количество бит узлов в подсети |  5
Количество узлов в подсети |  30
Сетевой адрес этой подсети |  192.168.200.128  
IPv4-адрес первого узла в этой подсети |  192.168.200.129  
IPv4-адрес последнего узла в этой подсети |  192.168.200.158  
Широковещательный IPv4-адрес в этой подсети |  192.168.200.159  

Решение  

_192.168.200.139_  
_255.255.255.0_  
_255.255.255.224_  /27

1100 0000.1010 1000.1100 1000.100|1 0101  
1111 1111.1111 1111.1111 1111.111|0 0000  
Почему 3 бита в подсети?  
_Заимствуе 3 бита для новой маски_ /27  
Почему 8 подсетей?  
_Используем формулу_ $$2^n$$ ; $$2^3=8$$  
Почему кол-во бит узлов в подсети 5?  
_Кол-во бит узлов = 32-длинна перфикса_  ; 32-27=5   
Почему кол-во узлов в подсети 30?  
_Используем формулу_ $$2^n-2$$ ; $$2^5-2=32-2=30$$


Пример 2

| Дано:  |      |  
| ----- | ----- |  
| IP-адрес узла | 10.101.99.228 | 
| Исходная маска подсети | 255.0.0.0 | 
| Новая маска подсети | 255.255.128.0 |  

| Найти: |   |
------ | -----
Количество бит подсети |  9 
Количество созданных подсетей |  512
Количество бит узлов в подсети |  15
Количество узлов в подсети |  32776
Сетевой адрес этой подсети |  10.101.0.0  
IPv4-адрес первого узла в этой подсети |  10.101.0.1  
IPv4-адрес последнего узла в этой подсети |  10.101.127.254  
Широковещательный IPv4-адрес в этой подсети |  10.101.127.255   

Решение  

_10.101.99.228_  
_255.0.0.0_  
_255.255.128.0_  /17  

0000 1010.0110 0101.0|110 1011.1110 0100  
1111 1111.1111 1111.1|000 0000.0000 0000  

_Заимствуем 9 бит для новой маски_ /17  
$$2^9=512$$  
32-17=15  
2 в 15 сетепени-2=32768-2=32776  

Пример 3  

| Дано:  |      |  
| ----- | ----- |  
| IP-адрес узла | 172.22.32.12 | 
| Исходная маска подсети | 255.255.0.0 | 
| Новая маска подсети | 255.255.224.0 |  

| Найти: |   |
------ | -----
Количество бит подсети |  3 
Количество созданных подсетей |  8
Количество бит узлов в подсети |  13
Количество узлов в подсети |  8109
Сетевой адрес этой подсети |  172.22.32.0    
IPv4-адрес первого узла в этой подсети |  172.22.32.1  
IPv4-адрес последнего узла в этой подсети |  172.22.63.254  
Широковещательный IPv4-адрес в этой подсети |  172.22.63.255 

Решение  

_172.22.32.12_  
_255.255.0.0_  
_255.255.224.0_ /19  

1010 1100.0001 0110.001|0 0000.0000 1100  
1111 1111.1111 1111.111|0 0000 0000 0000  

_Заиствуем 3 бита для новой маски_ /19  
$$2^3=8$$    
32-19=13  
2 в 13 степени-2=8192-2=8190  

Пример 4  

| Дано:  |      |  
| ----- | ----- |  
| IP-адрес узла | 192.168.1.245 | 
| Исходная маска подсети | 255.255.255.0 | 
| Новая маска подсети | 255.255.255.252 |

| Найти: |   |
------ | -----
Количество бит подсети |  6 
Количество созданных подсетей |  64
Количество бит узлов в подсети |  2
Количество узлов в подсети |  2
Сетевой адрес этой подсети |   192.168.1.244   
IPv4-адрес первого узла в этой подсети |    192.168.1.245
IPv4-адрес последнего узла в этой подсети |    192.168.1.246
Широковещательный IPv4-адрес в этой подсети |   192.168.1.247 

Решение 

_192.168.1.245_  
_255.255.255.0_  
_255.255.255.252_ /30

1100 0000.1010 1000.0000 0001.1111 01|01  
1111 1111.1111 1111.1111 1111.1111 11|00

_Заимствуем 6 бит для новой маски_ /30  
$$2^6=64$$  
32-30=2  
$$2^2-2=4-2=2$$ 

Пример 5

| Дано:  |      |  
| ----- | ----- |  
| IP-адрес узла | 128.107.0.55 | 
| Исходная маска подсети | 255.255.0.0 | 
| Новая маска подсети | 255.255.255.0 |
| Найти: |   |
------ | -----
Количество бит подсети | 8  
Количество созданных подсетей |  256
Количество бит узлов в подсети |  8
Количество узлов в подсети |  254
Сетевой адрес этой подсети | 128.107.0.0     
IPv4-адрес первого узла в этой подсети |   128.107.0.1 
IPv4-адрес последнего узла в этой подсети |    128.107.0.254
Широковещательный IPv4-адрес в этой подсети |   128.107.0.255  

Решение  

_128.107.0.55_  
_255.255.0.0_  
_255.255.255.0_ /24 

_Заимствуем 8 бит для новой маски_ /30  
$$2^8=256$$  
32-24=8  
$$2^8-2=256-2=254$$  

Пример 6  

| Дано:  |      |  
| ----- | ----- |  
| IP-адрес узла | 192.135.250.180 | 
| Исходная маска подсети | 255.255.255.0 | 
| Новая маска подсети | 255.255.255.248 |  

| Найти: |   |
------ | -----
Количество бит подсети |  5 
Количество созданных подсетей |  32
Количество бит узлов в подсети | 3
Количество узлов в подсети |  6
Сетевой адрес этой подсети |    192.135.200.176  
IPv4-адрес первого узла в этой подсети |  192.135.250.177  
IPv4-адрес последнего узла в этой подсети |    192.135.250.182
Широковещательный IPv4-адрес в этой подсети |   192.135.250.183  

Решение 

_192.135.250.180_  
_255.255.255.0_  
_255.255.255.248_ /29  

1100 0000.1000 0111.1111 1010.1011 0|100  
1111 1111.1111 1111.1111 1111.1111 1|000

_Заимствуем 5 бит для новой маски_ /29  
$$2^5=32$$  
32-29=3  
$$2^3-2=8-2=6$$  

Почему маска подсети так важна при анализе IPv4-адреса?  
_Помогает определить какая часть адреса относиться к сетевой части, а какая хостовой, путем подсчета побитовой операции. Можно определить находятся ли утстройсва в одной подсети и могут ли обмениваться данными напрямую. Обеспечивает правильную маршрутизацию трафика между различными подсетями, потому что устройства из разных подсетей взаимодействуют через маршрутизатор_
